# Clippy - Secure Text Sharing App

Clippy is a simple, secure text sharing application that allows users on different computers to share and collaborate on text in real-time. When a user creates a new session, a unique ID is generated to securely identify the shared text file on the server.

## Features

- Create secure sharing sessions with unique identifiers
- Text sharing between multiple users with manual save control
- Update notifications with optional loading to prevent disrupting your work
- Copy-to-clipboard functionality for easy sharing of links
- QR code generation for mobile device sharing
- Status indicators showing save status and last update checks
- Clean, responsive user interface

## Advanced Usage

### Pre-populating Content

You can initialize a Clippy session with pre-set text by using a specially formatted URL:

```
https://impressto.ca/clippy/#/share/{sessionId}/seed/{base64EncodedText}
```

For example:
```
https://impressto.ca/clippy/#/share/f88b0a88d57a92cb/seed/b2slMjB0aGVu
```

In this URL structure:
- `{sessionId}` is the unique identifier for the sharing session (e.g., `f88b0a88d57a92cb`)
- `{base64EncodedText}` is your text content encoded in base64 format (e.g., `b2slMjB0aGVu`)

This feature is useful for sharing templates or starter content with other users, or for bookmarking frequently used text snippets.



## Technology Stack

- **Frontend**: React 19 with React Router 7
- **Backend**: PHP for API and file hosting
- **Build Tool**: Vite 7
- **Package Manager**: Yarn
- **QR Code Generation**: qrcode.react

## Setup Instructions

### Prerequisites

- Node.js (v16+)
- Yarn package manager
- PHP (v7.4+)
- Web server (Apache, Nginx, etc.)

### Installation

1. Clone the repository:
   ```bash
   git clone https://your-repository/clippy.git
   cd clippy
   ```

2. Install frontend dependencies:
   ```bash
   yarn
   ```

3. Create a `.env.local` file with appropriate API URL:
   ```
   VITE_API_BASE_URL=/api
   ```

4. Make sure the PHP server can write to the `/data` directory:
   ```bash
   chmod 755 data
   ```

### Development

For development, you can use the development script:

```bash
./deploy.sh dev
```

This will:
1. Configure environment variables for development
2. Install dependencies if needed
3. Set the correct base path for routing

Then start the development server:
```bash
yarn dev
```

### Production Build

For production deployment, use the provided deployment script:

```bash
./deploy.sh prod
```

This will:
1. Set the correct environment variables for production
2. Set the base path to /clippy/ for production
3. Build the application for production
4. Create necessary directories

### PHP Hosting Method

The application includes an `index.php` file that serves the React application in PHP environments:

1. Upload all files to your web server including:
   - `dist/` folder (built React app)
   - `api/` folder (PHP backend)
   - `index.php` (main entry point)
   - `.htaccess` (server configuration)
   - `data/` folder (ensure it's writable)

2. Ensure your web server is configured to handle PHP files

3. The application will automatically:
   - Route API requests to the PHP backend
   - Serve static assets from the dist directory
   - Handle React routing through the index.php file

## Server Configuration

### Apache

The included `.htaccess` file is already configured to:
- Route API requests to the PHP backend
- Serve static assets from the dist directory
- Route all other requests through index.php

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Don't rewrite files or directories
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]
  
  # Directly serve the API requests
  RewriteRule ^api/(.*)$ api/$1 [L]
  
  # Serve static assets from the build directory
  RewriteRule ^(assets/.*)$ dist/$1 [L]
  
  # Route everything else through index.php
  RewriteRule ^ index.php [L]
</IfModule>
```

### Nginx

For Nginx, use a similar configuration:

```nginx
location / {
  try_files $uri $uri/ /index.php?$args;
}

location /api/ {
  try_files $uri $uri/ /api/index.php?$args;
}

location /assets/ {
  try_files $uri $uri/ /dist/assets/$uri;
}
```

## How It Works

1. User clicks "Start New Sharing Session" button
2. A unique ID is generated by the server and sent to the client
3. User is redirected to the sharing page with the unique ID in the URL
4. Users can type text and save changes when ready
5. Other users can access the same text by visiting the shared URL or scanning the QR code
6. The app checks for updates every 10 seconds and notifies users when updates are available
7. Users can choose when to load updates, preventing interruptions while typing

## Security Considerations

- File names are randomized with a secure unique ID to prevent unauthorized access
- Input validation is implemented to prevent directory traversal attacks
- No sensitive user data is stored
